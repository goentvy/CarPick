<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carpick.admin.demoReservationStatus.mapper.AdminReservationStatusMapperDemo">


    <!-- =========================================================
         1) 상태 변경용 단건 조회
         - 예약번호 / 모델명 / 차량번호 / 상태
         ========================================================= -->
    <update id="updateReservationStatus">
        UPDATE reservation
        SET reservation_status = #{status}
        WHERE reservation_id = #{reservationId}
    </update>

    <select id="selectReservationList"
            resultType="com.carpick.admin.demoReservationStatus.dto.AdminReservationStatusDtoDemo">
        SELECT
            r.reservation_id      AS reservationId,
            r.reservation_no      AS reservationNo,
            cs.model_name         AS modelName,
            v.vehicle_no          AS vehicleNo,
            r.reservation_status  AS reservationStatus
        FROM reservation r
                 JOIN vehicle_inventory v ON r.vehicle_id = v.vehicle_id
                 JOIN car_spec cs ON v.spec_id = cs.spec_id
        ORDER BY r.created_at DESC
    </select>

</mapper>
