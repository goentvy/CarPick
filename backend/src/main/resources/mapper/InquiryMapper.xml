<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carpick.domain.inquiry.mapper.InquiryMapper">

<insert id="insertInquiry"
useGeneratedKeys="true"
keyProperty="id">
	INSERT INTO inquiry(
		user_id,
		category,
		title,
		content,
		status
	) VALUES (
		#{userId},
		#{category},
		#{title},
		#{content},
		'pending'
	)
</insert>

<!--마이페이지 문의내역-->

<select id="findByUserId"
	parameterType="long"
	resultType="com.carpick.domain.inquiry.vo.Inquiry">
	SELECT
		id,
		user_id,
		category,
		title,
		content,
		status,
		admin_reply AS adminReply,
		created_at AS createdAt
	FROM inquiry
	WHERE user_id = #{userId}
	ORDER BY created_at DESC
</select>

</mapper>
